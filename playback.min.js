(function(){function require(path,parent,orig){var resolved=require.resolve(path);if(null==resolved){orig=orig||path;parent=parent||"root";var err=new Error('Failed to require "'+orig+'" from "'+parent+'"');err.path=orig;err.parent=parent;err.require=true;throw err}var module=require.modules[resolved];if(!module.exports){module.exports={};module.client=module.component=true;module.call(this,module.exports,require.relative(resolved),module)}return module.exports}require.modules={};require.aliases={};require.resolve=function(path){if(path.charAt(0)==="/")path=path.slice(1);var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"];for(var i=0;i<paths.length;i++){var path=paths[i];if(require.modules.hasOwnProperty(path))return path;if(require.aliases.hasOwnProperty(path))return require.aliases[path]}};require.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0))return path;curr=curr.split("/");path=path.split("/");for(var i=0;i<path.length;++i){if(".."==path[i]){curr.pop()}else if("."!=path[i]&&""!=path[i]){segs.push(path[i])}}return curr.concat(segs).join("/")};require.register=function(path,definition){require.modules[path]=definition};require.alias=function(from,to){if(!require.modules.hasOwnProperty(from)){throw new Error('Failed to alias "'+from+'", it does not exist')}require.aliases[to]=from};require.relative=function(parent){var p=require.normalize(parent,"..");function lastIndexOf(arr,obj){var i=arr.length;while(i--){if(arr[i]===obj)return i}return-1}function localRequire(path){var resolved=localRequire.resolve(path);return require(resolved,parent,path)}localRequire.resolve=function(path){var c=path.charAt(0);if("/"==c)return path.slice(1);if("."==c)return require.normalize(p,path);var segs=parent.split("/");var i=lastIndexOf(segs,"deps")+1;if(!i)i=0;path=segs.slice(0,i+1).join("/")+"/deps/"+path;return path};localRequire.exists=function(path){return require.modules.hasOwnProperty(localRequire.resolve(path))};return localRequire};require.register("component-type/index.js",function(exports,require,module){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}});require.register("ianstormtaylor-is-empty/index.js",function(exports,require,module){module.exports=isEmpty;var has=Object.prototype.hasOwnProperty;function isEmpty(val){if(null==val)return true;if("number"==typeof val)return 0===val;if(undefined!==val.length)return 0===val.length;for(var key in val)if(has.call(val,key))return false;return true}});require.register("ianstormtaylor-is/index.js",function(exports,require,module){var isEmpty=require("is-empty"),typeOf=require("type");var types=["arguments","array","boolean","date","element","function","null","number","object","regexp","string","undefined"];for(var i=0,type;type=types[i];i++)exports[type]=generate(type);exports.fn=exports["function"];exports.empty=isEmpty;exports.nan=function(val){return exports.number(val)&&val!=val};function generate(type){return function(value){return type===typeOf(value)}}});require.register("component-indexof/index.js",function(exports,require,module){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}});require.register("component-emitter/index.js",function(exports,require,module){var index=require("indexof");module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var i=index(callbacks,fn._off||fn);if(~i)callbacks.splice(i,1);return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}});require.register("juliangruber-events/index.js",function(exports,require,module){var Emitter=require("emitter");Emitter.prototype.addListener=Emitter.prototype.on;Emitter.prototype.removeListener=Emitter.prototype.off;Emitter.prototype.removeAllListeners=Emitter.prototype.off;Emitter.prototype.setMaxListeners=function(){};exports.EventEmitter=Emitter});require.register("juliangruber-periodic/index.js",function(exports,require,module){var EventEmitter=require("events").EventEmitter;module.exports=periodic;function periodic(interval){if(!(this instanceof periodic))return new periodic(interval);EventEmitter.call(this);this.interval=interval;this.ended=false;this.timeout;var self=this;setTimeout(function(){self.repeat()})}inherits(periodic,EventEmitter);periodic.prototype.repeat=function(){if(this.ended)return;var start=+new Date;var tick=0;var dt=start+this.interval*++tick-+new Date;if(dt<0)dt=0;var self=this;self.timeout=setTimeout(function(){self.repeat()},dt);this.emit("tick")};periodic.prototype.end=function(){this.ended=true;if(this.timeout)clearTimeout(this.timeout)};function inherits(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}});require.register("timoxley-next-tick/index.js",function(exports,require,module){"use strict";if(typeof setImmediate=="function"){module.exports=function(f){setImmediate(f)}}else if(typeof process!="undefined"&&typeof process.nextTick=="function"){module.exports=process.nextTick}else if(typeof window=="undefined"||window.ActiveXObject||!window.postMessage){module.exports=function(f){setTimeout(f)}}else{var q=[];window.addEventListener("message",function(){var i=0;while(i<q.length){try{q[i++]()}catch(e){q=q.slice(i);window.postMessage("tic!","*");throw e}}q.length=0},true);module.exports=function(fn){if(!q.length)window.postMessage("tic!","*");q.push(fn)}}});require.register("playback/lib/ease.js",function(exports,require,module){"use strict";function ease(name){switch(name){case"linear":return ease.linear}}function linear(t){return t}ease.linear=linear;module.exports=ease});require.register("playback/lib/index.js",function(exports,require,module){"use strict";var Playback=require("./playback");module.exports=new Playback});require.register("playback/lib/frame.js",function(exports,require,module){"use strict";var Timer=require("./timer"),Tween=require("./tween"),is=require("is");function Frame(fn){if(!is.fn(fn)){throw"Frame function required"}this._fn=fn;this._player=null;this._onend=null;this._playhead=0;this._duration=0;this._model=null;this._timers=[];this._tweens=[]}Frame.prototype.init=function(){this.reset();this._fn.call(this,this);return this};Frame.prototype.end=function(){this.reset();if(is.fn(this._onend)){this._onend.call(this,this)}return this};Frame.prototype.player=function(value){if(arguments.length===0){return this._player}this._player=value;return this};Frame.prototype.playhead=function(value){var self=this,i,timer,timers,tween,tweens;if(arguments.length===0){return this._playhead}if(this._playhead>=value){return this}this._playhead+=1;while(true){timers=this.timers();if(timers.length===0){break}this._playhead=timers[0].until(this._playhead);if(this._playhead>value){break}this._duration=Math.max(this._duration,this._playhead);for(i=0;i<timers.length;i+=1){timer=timers[i];if(i>0&&timer.until(this._playhead)!==this._playhead){break}timer.run()}this._playhead+=1}this._playhead=value;this._duration=Math.max(this._duration,this._playhead);tweens=this.tweens();for(i=0;i<tweens.length;i+=1){tween=tweens[i];tween.update(this._playhead)}return this};Frame.prototype.duration=function(){return this._duration};Frame.prototype.timer=function(fn){var timer=new Timer(fn);timer.startTime(this.playhead());this._timers.push(timer);return timer};Frame.prototype.tween=function(fn,startValue,endValue,duration,delay){if(duration===undefined){duration=0}duration=Math.max(0,duration);if(delay===undefined){delay=0}delay=Math.max(0,delay);var startTime=this.playhead()+delay,endTime=startTime+duration,tween=new Tween(fn,startValue,endValue,startTime,endTime);console.log(startTime,endTime,startValue,endValue);this._tweens.push(tween);if(delay===0){tween.update()}return tween};Frame.prototype.timers=function(){var i,timer,playhead=this.playhead();for(i=0;i<this._timers.length;i+=1){timer=this._timers[i];if(timer.until(playhead)===null){timer.stop()}}this._timers=this._timers.filter(function(timer){return timer.running()});this._timers=this._timers.sort(function(a,b){var ret=a.until(playhead)-b.until(playhead);return ret!==0?ret:a.id()-b.id()});return this._timers};Frame.prototype.tweens=function(){var playhead=this.playhead();this._tweens=this._tweens.filter(function(tween){return playhead<tween.endTime()});this._tweens=this._tweens.sort(function(a,b){return a.startTime-b.startTime});return this._tweens};Frame.prototype.model=function(value){if(arguments.length===0){return this._model}this._model=value;return this};Frame.prototype.layout=function(value){var player=this.player();return player!==null?player.layout():null};Frame.prototype.reset=function(){var i;this._playhead=0;this._duration=0;for(i=0;i<this._timers.length;i+=1){this._timers[0].stop()}this._timers=[]};Frame.prototype.onend=function(fn){if(arguments.length===0){return this._onend}this._onend=fn;return this};module.exports=Frame});require.register("playback/lib/functor.js",function(exports,require,module){"use strict";function functor(v){return typeof v==="function"?v:function(){return v}}module.exports=functor});require.register("playback/lib/layout.js",function(exports,require,module){"use strict";function Layout(){this._player=null}Layout.prototype.initialize=function(){};Layout.prototype.player=function(value){if(arguments.length===0){return this._player}this._player=value;this.initialize();return this};Layout.prototype.current=function(){var player=this.player();if(player===null){return null}return player.current()};Layout.prototype.model=function(){var current=this.current();if(current===null){return null}return current.model()};module.exports=Layout});require.register("playback/lib/playback.js",function(exports,require,module){"use strict";var Player=require("./player"),Layout=require("./layout");function Playback(){}Playback.prototype.player=function(){return new Player};Playback.prototype.layout=function(){return new Layout};module.exports=Playback;Playback.VERSION=Playback.prototype.VERSION="0.0.1"});require.register("playback/lib/player.js",function(exports,require,module){"use strict";var Frame=require("./frame"),is=require("is"),nextTick=require("next-tick"),periodic=require("periodic");function Player(){this._rate=0;this._currentIndex=0;this._frames=[];this._prevtick=null;this._ticker=null;this._model=null;this._layout=null}Player.prototype.rate=function(value){if(arguments.length===0){return this._rate}this._rate=Math.max(0,value);var self=this,prevtick=new Date;if(this._rate>0&&this._ticker===null){this.tick(0);this._ticker=periodic(100).on("tick",function(){var t=new Date;self.tick(self.rate()*(t.valueOf()-prevtick.valueOf()));prevtick=t})}else if(this._rate===0&&this._ticker!==null){self.tick(self.rate()*((new Date).valueOf()-prevtick.valueOf()));this._ticker.end()}return this};Player.prototype.play=function(){this.rate(1);return this};Player.prototype.pause=function(){this.rate(0);return this};Player.prototype.playing=function(){return this.rate()!==0};Player.prototype.frame=function(value){var frame;if(is.number(value)){if(value>=0&&value<this._frames.length){return this._frames[value]}return null}if(is.fn(value)){frame=new Frame(value);frame.player(this);this._frames.push(frame);this.currentIndex(0,true);return this}throw"Player.frame() invalid argument: "+value};Player.prototype.frames=function(){return this._frames.slice()};Player.prototype.current=function(value){if(arguments.length===0){if(this._frames.length===0){return null}return this._frames[this._currentIndex]}var index=this._frames.indexOf(value);if(index!==-1){this.currentIndex(index)}return this};Player.prototype.currentIndex=function(value,force){var frame;if(arguments.length===0){return this._currentIndex}if(value>=0&&value<this._frames.length){if(value!==this._currentIndex||force){this._currentIndex=value;frame=this._frames[value];frame.model(this.model());frame.init()}}return this};Player.prototype.next=function(){this.currentIndex(this.currentIndex()+1);return this};Player.prototype.prev=function(){this.currentIndex(this.currentIndex()-1);return this};Player.prototype.model=function(value){if(arguments.length===0){return this._model}this._model=value;return this};Player.prototype.layout=function(value){if(arguments.length===0){return this._layout}if(this._layout!==null){this._layout.player(null)}this._layout=value;if(this._layout!==null){this._layout.player(this)}return this};Player.prototype.update=function(){if(is.fn(this.onupdate())){this.onupdate().call(this,this)}return this};Player.prototype.tick=function(elapsed){var frame=this.current();if(frame===null){return}frame.playhead(frame.playhead()+elapsed);this.update()};Player.prototype.onupdate=function(fn){if(arguments.length===0){return this._onupdate}this._onupdate=fn;return this};module.exports=Player});require.register("playback/lib/timer.js",function(exports,require,module){"use strict";function Timer(fn){this._id=Timer.nextid;Timer.nextid+=1;this._fn=fn;this._startTime=undefined;this._endTime=undefined;this._interval=undefined;this._running=true}Timer.nextid=1;Timer.prototype.id=function(){return this._id};Timer.prototype.startTime=function(value){if(arguments.length===0){return this._startTime}this._startTime=value;return this};Timer.prototype.endTime=function(value){if(arguments.length===0){return this._endTime}this._endTime=value;return this};Timer.prototype.interval=function(value){if(arguments.length===0){return this._interval}if(value<=0){this._interval=undefined}else{this._interval=value}return this};Timer.prototype.delay=function(value){if(value<=0){return}this._startTime+=value;return this};Timer.prototype.times=function(value){this.endTime(this.startTime()+this.interval()*Math.max(1,value));return this};Timer.prototype.duration=function(value){if(arguments.length===0){if(this._endTime===undefined){return undefined}return this._endTime-this._startTime}this.endTime(this.startTime()+value);return this};Timer.prototype.running=function(){return this._running};Timer.prototype.stop=function(){this._running=false;return this};Timer.prototype.run=function(){this._fn.call(this,this)};Timer.prototype.until=function(t){var offset,startTime=this.startTime(),endTime=this.endTime(),interval=this.interval();if(!this.running()||startTime===undefined||interval===undefined){return null}if(startTime>t){return startTime}if(endTime!==undefined&&t>endTime){return null}offset=t-startTime;if(offset%interval===0){return t}return startTime+(Math.floor(offset/interval)+1)*interval};module.exports=Timer});require.register("playback/lib/tween.js",function(exports,require,module){"use strict";var ease=require("./ease"),functor=require("./functor"),is=require("is");function Tween(fn,startValue,endValue,startTime,endTime){if(!is.fn(fn)){fn=null}this._fn=fn;this._startValue=functor(startValue);this._endValue=functor(endValue);this._startTime=startTime;this._endTime=Math.max(startTime,endTime);this._ease=ease.linear}Tween.prototype.startTime=function(){return this._startTime};Tween.prototype.endTime=function(){return this._endTime};Tween.prototype.startValue=function(){return this._startValue()};Tween.prototype.endValue=function(){return this._endValue()};Tween.prototype.ease=function(value){if(arguments.length===0){return this._ease}if(is.fn(value)){this._ease=value}else{this._ease=ease(value)}return this};Tween.prototype.value=function(t){var startValue=this.startValue(),endValue=this.endValue(),startTime=this.startTime(),endTime=this.endTime(),delta=endValue-startValue;if(startTime===endTime){return endValue}return delta*this._ease(Math.max(0,Math.min(1,(t-startTime)/(endTime-startTime))))};Tween.prototype.update=function(t){if(this._fn===null||t<this.startTime()){return null}return this._fn.call(this,this.value(t))};module.exports=Tween});require.alias("ianstormtaylor-is/index.js","playback/deps/is/index.js");require.alias("ianstormtaylor-is/index.js","is/index.js");require.alias("component-type/index.js","ianstormtaylor-is/deps/type/index.js");require.alias("ianstormtaylor-is-empty/index.js","ianstormtaylor-is/deps/is-empty/index.js");require.alias("juliangruber-periodic/index.js","playback/deps/periodic/index.js");require.alias("juliangruber-periodic/index.js","periodic/index.js");require.alias("juliangruber-events/index.js","juliangruber-periodic/deps/events/index.js");require.alias("component-emitter/index.js","juliangruber-events/deps/emitter/index.js");require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js");require.alias("timoxley-next-tick/index.js","playback/deps/next-tick/index.js");require.alias("timoxley-next-tick/index.js","next-tick/index.js");require.alias("playback/lib/index.js","playback/index.js");if(typeof exports=="object"){module.exports=require("playback")}else if(typeof define=="function"&&define.amd){define(function(){return require("playback")})}else{this["playback"]=require("playback")}})();